on_game_start = {
	on_actions = {
		mb_on_game_start
	}
}

mb_on_game_start = {
	effect = {
		
		if = {
			limit = {
				has_fp2_dlc_trigger = yes
			}
			start_struggle = { struggle_type = iberian_struggle start_phase = struggle_iberia_phase_opportunity }
		}
		if = {
			limit = {
				game_start_date >= 1098.1.1
				game_start_date < 1234.1.1
				has_fp2_dlc_trigger = yes
			}
			struggle:iberian_struggle = {
				change_struggle_phase = struggle_iberia_phase_hostility # Change to hostility. The Almoravids were not as tolerant of Christians and did invade the Peninsula several times. They collapsed in the late 1140's and were replaced with the Almohads who actually reversed part of the reconquista for a short time. They suffered a decisive defeat in 1212 which marked the end of any further Islamic conquests in Iberia
				set_faith_as_involved = faith:masmudi
			}
		}
		if = {
			limit = {
				game_start_date >= 1235.1.1
				game_start_date < 1266.1.1
				has_fp2_dlc_trigger = yes
			}
			struggle:iberian_struggle = {
				change_struggle_phase = struggle_iberia_phase_compromise # Change to compromise phase. Almohads no longer control any of al-Andalus
				set_culture_as_involved = culture:french
			}
		}
		
		if = {
			limit = {
				game_start_date >= 1267.1.1
				has_fp2_dlc_trigger = yes
			}
			struggle:iberian_struggle = {
				change_struggle_phase = struggle_iberia_phase_conciliation # Change to final phase which is conciliation. Marked by the only remaining Emirate, the Emirate of Granada, being a tributary of Castile. This would be how things would continue till it was finally conquered in 1492
			}
		}
		
		if = {
			limit = {
				exists = title:e_byzantium.holder
				game_start_date >= 1081.4.1
			}
			title:e_byzantium.holder = {
				every_vassal = {
					limit = {
						vassal_contract_has_modifiable_obligations = yes
					}
					#vassal_contract_decrease_obligation_level = feudal_government_taxes
					vassal_contract_decrease_obligation_level = feudal_government_levies
					set_vassal_contract_modification_blocked = no
				}
			}
		}
		
		every_living_character = {
			limit = {
				OR = {
					has_culture = culture:serbian
					has_culture = culture:croatian
				}
				is_landed = yes
				is_ruler = yes
				has_government = feudal_government
				has_faith = faith:slavic_pagan
			}
			change_government = tribal_government
		}
		
		
		
		culture:old_saxon = {
			set_heritage_from = culture:saxon
			set_language_from = culture:saxon
		}
		culture:ilmenian = {
			set_name_list = name_list_old_east_slavic
		}
		culture:severian = {
			set_name_list = name_list_old_east_slavic
		}
		culture:volhynian = {
			set_name_list = name_list_old_east_slavic
		}
		culture:mon = {
			set_culture_pillar = language_mon
		}
		culture:khitan = {
			set_culture_pillar = language_xianbei
		}
		culture:tuyuhun = {
			set_culture_pillar = language_xianbei
		}
		
		
		every_living_character = {
			limit = {
				age > 150
			}
			death = {
				death_reason = death_natural_causes
			}
		}
		
		
		if = {
			limit = { exists = title:d_muwalladi.holder }
			faith:muwalladi = {
				set_religious_head_title = title:d_muwalladi
			}
		}
		title:d_muwalladi = {
			add_title_law = temporal_head_of_faith_succession_law
			set_capital_county = title:c_cordoba
		}
		faith:zayidi = {
			set_religious_head_title = title:d_zayidi
		}
		title:d_zayidi = {
			add_title_law = temporal_head_of_faith_succession_law
		}
		if = {
			limit = {
				exists = title:d_zayidi.holder
				title:d_zayidi.holder = { highest_held_title_tier = tier_duchy }
			}
			title:d_zayidi.holder = {
				set_primary_title_to = title:d_zayidi
			}
		}
		faith:alevi = {
			set_religious_head_title = title:d_imami
		}
		if = {
			limit = { game_start_date < 1000.1.1 }
			title:k_italy = { set_capital_county = title:c_pavia }
			title:k_italy.holder = { set_realm_capital = title:c_pavia }
		}
		if = {
			limit = { game_start_date > 1067.1.1 }
			title:k_sakya_trizin.holder = { add_realm_law_skip_effects = male_preference_law }
		}


		if = {
			limit = {
				game_start_date > 1095.11.27
			}
			religion:christianity_religion = {
				every_faith = {
					religion = {
						set_variable = {
							name = variable_ghw_unlocked # Crusades
							value = yes
						}
					}
				}
			}
			religion:islam_religion = {
				every_faith = {
					religion = {
						set_variable = {
							name = variable_ghw_unlocked # Crusades
							value = yes
						}
					}
				}
			}
		}
		
	
	
	####1187 ###
	
		if = {
			limit = {
				game_start_date = 1187.1.1
			}
			character:230000 = { set_realm_capital = title:c_gurganj }
			character:204500 = {
				if = {
					limit = {
						is_alive = yes
						is_landed = yes
					}
				}
				house = {
					add_house_modifier = {
						modifier = ireland_laudabiliter_modifier
						days = 25101
					}
				}
			}
			faith:catholic = {
				change_fervor = {
					value = 24
					desc = cultural_acceptance_historical_relations#test_interaction_fervor_gain
				}
			}
			faith:ashari = {
				change_fervor = {
					value = 25
					desc = cultural_acceptance_historical_relations#test_interaction_fervor_gain
				}
			}
			faith:masmudi = {
				change_fervor = {
					value = 25
					desc = cultural_acceptance_historical_relations#test_interaction_fervor_gain
				}
			}
			faith:slavic_pagan = {
				change_fervor = {
					value = -30
					desc = cultural_acceptance_historical_relations#test_interaction_fervor_gain
				}
			}
			
			character:226000 = { #Saladin
			if = {
				limit = {
					is_alive = yes
					is_landed = yes
				}
				trigger_event = {
					id = asdac_bookmark.1101
					days = 71
				}
			}
		}
		
		}
	
		
		
		### 1204 ###
		
		if = {
			limit = {
				game_start_date = 1204.5.16
			}
			character:93052 = { set_realm_capital = title:c_gurganj }
			faith:orthodox = {
				change_fervor = {
					value = 25
					desc = cultural_acceptance_historical_relations#test_interaction_fervor_gain
				}
			}
			faith:ashari = {
				change_fervor = {
					value = 25
					desc = cultural_acceptance_historical_relations#test_interaction_fervor_gain
				}
			}
			faith:masmudi = {
				change_fervor = {
					value = 25
					desc = cultural_acceptance_historical_relations#test_interaction_fervor_gain
				}
			}
			faith:slavic_pagan = {
				change_fervor = {
					value = -30
					desc = cultural_acceptance_historical_relations#test_interaction_fervor_gain
				}
			}
			character:204514 = {
				if = {
					limit = {
						is_alive = yes
						is_landed = yes
					}
				}
				house = {
					add_house_modifier = {
						modifier = ireland_laudabiliter_modifier
						days = 18761
					}
				}
			}
			character:125501 = { #Genghis Khan Temujin
				if = {
					limit = {
						is_alive = yes
						is_landed = yes
					}
					trigger_event = {
						id = asdac_bookmark.2001
						days = 1
					}
					trigger_event = {
						id = asdac_bookmark.2002
						days = 1
					}
				}
			}
		}
		
		#Other Ghengis starts
		
		if = {
			limit = {
				game_start_date = 1194.10.1
			}

			character:125501 = { #Genghis Khan Temujin
				if = {
					limit = {
						is_alive = yes
						is_landed = yes
					}
					trigger_event = {
						id = asdac_bookmark.2001
						days = 1
					}
				}
			}
		}
		
		if = {
			limit = {
				game_start_date = 1187.1.1
			}

			character:125501 = { #Genghis Khan Temujin
				if = {
					limit = {
						is_alive = yes
						is_landed = yes
					}
					trigger_event = {
						id = asdac_bookmark.2001
						days = 1
					}
				}
			}
		}
		
		if = {
			limit = {
				game_start_date = 1166.4.1
			}

			character:125501 = { #Genghis Khan Temujin
				if = {
					limit = {
						is_alive = yes
						is_landed = yes
					}
					trigger_event = {
						id = asdac_bookmark.2001
						days = 1
					}
				}
			}
		}
		
		
		##
		
		#1235
		
		if = {
			limit = {
				game_start_date > 1235.1.1
			}
			faith:bosnian_church = { remove_doctrine = special_doctrine_ecumenical_christian }
		}
		
		
		#1258
		
		if = {
			limit = {
				game_start_date > 1258.1.1
			}
			province:4828 = {
				remove_building = house_of_wisdom_01
			}
		}
		
		
		#1337
		
		if = {
			limit = {
				game_start_date = 1337.1.1
			}
			title:d_ryazan.holder = { set_realm_capital = title:c_ryazan }
			title:e_golden_horde.holder = { set_realm_capital = title:c_itil }
			faith:slavic_pagan = {
				change_fervor = {
					value = -30
					desc = cultural_acceptance_historical_relations#test_interaction_fervor_gain
				}
			}
			character:170258 = {
				set_realm_capital = title:c_delhi
			}
			title:d_opsikion = { set_capital_county = title:c_prusa } #Nicaea was irrelevant during the Ottoman period
			title:k_nikaea = { set_capital_county = title:c_prusa }
			title:d_opsikion.holder = { set_realm_capital = title:c_prusa }
			title:c_nikaea = { set_color_from_title = title:c_nikaea }
			
			title:d_anatolia.holder = { set_realm_capital = title:c_lycaonia }
						
			title:d_charsianon.holder = { set_realm_capital = title:c_kaisereia }
			
			title:d_paphlagonia.holder = { set_realm_capital = title:c_pompeiopolis }
			
			title:d_thracesia.holder = { set_realm_capital = title:c_chonae }
		}
		
		if = {
			limit = { game_start_date = 1337.1.1 }
			culture:irish = { remove_culture_tradition = tradition_polygamous }
			culture:gaelic = { remove_culture_tradition = tradition_concubines }
			culture:welsh = { remove_culture_tradition = tradition_concubines }
			culture:cumbrian = { remove_culture_tradition = tradition_concubines }
		}
		if = {
			limit = { game_start_date > 1080.1.1 }
			culture:greek = { add_culture_tradition = tradition_zealous_people }
		}
		
		
		#############
		
		##A much easier way to set de_jure territory changes without touching history files. Also comes with the added benefit of it not requiring me to restart the game to test it
		
		
		#Titles that never have a de_jure
		
		if = {
			limit = {
				game_start_date >= 769.1.1
			}

			title:k_papal_state = { set_de_jure_liege_title = title:e_null_empire_italia } #Papacy should never be 'de jure' anything. Trying to lay claim to the Papacy typically lead to a war with your neighbors. For example Lombardia claiming Rome was used as a reason by Charlemagne to invade.
			title:k_papal_states = { set_de_jure_liege_title = title:e_null_empire_italia }
			title:k_venice = { set_de_jure_liege_title = title:e_null_empire_italia } #The Republics should stay independent. An empire could vassalize them but they weren't going to be happy about it.
			title:k_genoa = { set_de_jure_liege_title = title:e_null_empire_italia } #The Republics should stay independent. An empire could vassalize them but they weren't going to be happy about it.
			title:k_pisa = { set_de_jure_liege_title = title:e_null_empire_italia } #The Republics should stay independent. An empire could vassalize them but they weren't going to be happy about it.
			
			title:k_georgia = { set_de_jure_liege_title = title:e_null_empire_caucasus } #We don't want the ERE 'de jure' conquering Armenia or Georgia. Area was a borderlands of empires.
			title:k_old_armenia = { set_de_jure_liege_title = title:e_null_empire_anatolia } #We don't want the ERE 'de jure' conquering Armenia or Georgia. Area was a borderlands of empires.
			title:k_caucasus = { set_de_jure_liege_title = title:e_null_empire_caucasus } #Don't want the ERE having a de jure Alania or a steppe tribe having a de jure claim on it
			title:k_armenia = { set_de_jure_liege_title = title:e_null_empire_anatolia } #We don't want the ERE 'de jure' conquering Armenia or Georgia. Area was a borderlands of empires.
			title:k_kabulistan = { set_de_jure_liege_title = title:e_null_empire_kabulistan } #The region of Afghanistan tended to change hands quite often and was more a borderland
			title:k_shirvan = { set_de_jure_liege_title = title:e_null_empire_caucasus } #Don't want Persia having a claim on Shirvan. Don't want steppe having it either.
			
			title:k_sahara = { set_de_jure_liege_title = title:e_null_empire_sahara } #It's the Sahara. Even in the EU4 time period you'd have a hard time convincing me to allow an empire having 'de jure' control of this
			
		}
		
		if = {
			limit = {
				game_start_date >= 1234.1.1
			}
		
			title:k_khwarezmia = { set_de_jure_liege_title = title:e_null_empire } #Region became a borderland between the 3 Khaganates

			
		}
		
		
		#For when Old Armenia is used in 769
		if = {
			limit = {
				game_start_date >= 769.1.1
				game_start_date <= 861.1.1
			}

			title:d_greater_armenia = { set_de_jure_liege_title = title:k_old_armenia }
			title:d_suenik = { set_de_jure_liege_title = title:k_old_armenia }
			title:d_vaspurakan = { set_de_jure_liege_title = title:k_old_armenia }
			title:d_mesopotamia = { set_de_jure_liege_title = title:k_old_armenia }
			title:d_dzopk = { set_de_jure_liege_title = title:k_old_armenia }
			title:d_artsakh = { set_de_jure_liege_title = title:k_old_armenia }
			title:d_georgia = { set_de_jure_liege_title = title:k_old_armenia }
			title:d_taron = { set_de_jure_liege_title = title:k_old_armenia }
			title:d_melitene = { set_de_jure_liege_title = title:k_old_armenia }
		}
		
		
		#769 Setup
		
		#if = {
		#	limit = {
		#		game_start_date >= 769.1.1
		#		game_start_date <= 867.1.1
		#	
		#	}
		#
		#	title:k_bohemia = { set_de_jure_liege_title = title:e_wendish_empire }
		#}
		
		if = {
			limit = {
				game_start_date >= 769.1.1
				game_start_date <= 867.1.1
			}

			title:k_dacia = { set_de_jure_liege_title = title:e_bulgaria }
			title:k_moldavia = { set_de_jure_liege_title = title:e_bulgaria }
		}
		
		if = {
			limit = {
				game_start_date >= 769.1.1
				game_start_date <= 936.1.1
			}

			title:d_syrmia = { set_de_jure_liege_title = title:k_croatia }
			title:d_bosna = { set_de_jure_liege_title = title:k_serbia }
			title:d_realusora = { set_de_jure_liege_title = title:k_serbia }
			title:k_jazira = { set_de_jure_liege_title = title:e_arabia }
		}
		
		
		#867 - 2 Setup (For bookmark where e_francia does not exist)
		
		if = {
			limit = {
				game_start_date = 867.1.2
			}

			title:k_italy = { set_de_jure_liege_title = title:e_italy }
		}
		
		#936
		
		if = {
			limit = {
				game_start_date = 936.8.7
			}

			title:d_moravia = { set_de_jure_liege_title = title:k_bohemia }
		}
		
		#993
		
		if = {
			limit = {
				game_start_date = 993.1.1
			}

			title:d_syrmia = { set_de_jure_liege_title = title:k_croatia }
			title:d_bosna = { set_de_jure_liege_title = title:k_serbia }
			title:d_realusora = { set_de_jure_liege_title = title:k_serbia }
			title:d_lausitz = { set_de_jure_liege_title = title:k_saxony }
			title:d_ostmark = { set_de_jure_liege_title = title:k_saxony }
		}
		
		#1018-1066
		
		if = {
			limit = {
				game_start_date >= 1018.1.1
				game_start_date <= 1067.1.1
			}

			title:d_syrmia = { set_de_jure_liege_title = title:k_croatia }
			title:d_ostmark = { set_de_jure_liege_title = title:k_saxony }
			
		}
		
		#1066-1144
		
		if = {
			limit = {
				game_start_date >= 1066.1.1
				game_start_date <= 1145.1.1
			}

			title:d_ostmark = { set_de_jure_liege_title = title:k_saxony }
			
		}
		
		#HRE setup
		
		if = {
			limit = {
				game_start_date >= 993.1.1
				game_start_date < 1000.1.1
			}

			title:k_italy = { set_de_jure_liege_title = title:e_hre }
			title:k_romagna = { set_de_jure_liege_title = title:e_hre }
			title:k_burgundy = { set_de_jure_liege_title = title:e_hre }
			title:k_sardinia = { set_de_jure_liege_title = title:e_null_empire_italia } #To remove the e_italia title since when the HRE has Italy the only remaining title is Sardinia. 
		}
		
		if = {
			limit = {
				game_start_date >= 1001.1.1
				game_start_date <= 1266.1.1
			}

			title:k_italy = { set_de_jure_liege_title = title:e_hre }
			title:k_romagna = { set_de_jure_liege_title = title:e_hre }
			title:k_burgundy = { set_de_jure_liege_title = title:e_hre }
			title:k_sardinia = { set_de_jure_liege_title = title:e_null_empire_italia } #To remove the e_italia title since when the HRE has Italy the only remaining title is Sardinia. 
			title:k_sicily = { set_de_jure_liege_title = title:e_null_empire_italia } #ERE loses claim on Sicily but it'd be odd to have a 'Empire of Italy' that consists just of Sardinia and Sicily and I don't want the HRE having an easy way to get Sicily
		}
		
		if = {
			limit = {
				game_start_date >= 1267.1.1 #Once the Hohenstaufens are gone all that remains is northern Italy under the HRE. Can let e_italy exist again.
				game_start_date <= 1338.1.1
			}
			title:k_burgundy = { set_de_jure_liege_title = title:e_hre } 
		}
		
		#End HRE setup
		
		
		#ERE Setup - To show the weakening of the ERE
		
		if = {
			limit = {
				game_start_date >= 1081.1.1
				game_start_date <= 1300.1.1
			}
		
			title:k_anatolia = { set_de_jure_liege_title = title:e_null_empire_anatolia } #Anatolia lost to the Turks
		}
		
		if = {
			limit = {
				game_start_date >= 1166.1.1
			}
		
			title:k_cilician = { set_de_jure_liege_title = title:e_null_empire_anatolia } #Cilicia never back under the ERE
		}
		
		if = {
			limit = {
				game_start_date >= 1194.1.1
			}
		
			title:k_cyprus = { set_de_jure_liege_title = title:e_null_empire_anatolia } #Cyprus lost to the crusader states
			
		}
		
		if = {
			limit = {
				game_start_date >= 1337.1.1
			}
		
			title:k_serbia = { set_de_jure_liege_title = title:e_serbia }
		}
		
		if = {
			limit = {
				game_start_date = 1018.8.1
			}
		
			title:k_bulgaria = { set_de_jure_liege_title = title:e_byzantium }
		}
		
		#End ERE setup
		
		#For when the Liao Dynasty controls Mongolia
		if = {
			limit = {
				game_start_date >= 918.1.1
				game_start_date <= 1127.1.1
			}

			title:d_arkhangai = { set_de_jure_liege_title = title:k_liao }
			title:d_gobi_altai = { set_de_jure_liege_title = title:k_liao }
			title:d_khovd = { set_de_jure_liege_title = title:k_liao }
			title:d_khovsgol = { set_de_jure_liege_title = title:k_liao }
			title:d_selenga_valley = { set_de_jure_liege_title = title:k_liao }
			title:d_ubsunur_hollow = { set_de_jure_liege_title = title:k_liao }
			title:d_ogrash = { set_de_jure_liege_title = title:k_liao }
			title:d_otuken = { set_de_jure_liege_title = title:k_liao }
			title:d_ovorkhangai = { set_de_jure_liege_title = title:k_liao }
		}
		
		#For when the Kara-Khitai exist
		if = {
			limit = {
				game_start_date >= 1144.1.1
				game_start_date <= 1219.1.1
			}
		
			title:k_zhetysu = { set_de_jure_liege_title = title:e_kara_khitai } 
			title:k_syr_darya = { set_de_jure_liege_title = title:e_kara_khitai } 
			title:k_transoxiana = { set_de_jure_liege_title = title:e_kara_khitai } 
			title:k_oghuz_il = { set_de_jure_liege_title = title:e_null_empire } 
		}
		
	
		
		
		##############
		
		if = {
			limit = {
				exists = struggle:iberian_struggle
			}
			struggle:iberian_struggle = { set_culture_as_involved = culture:aragonese }
		}
		culture:kimek = {
			change_cultural_acceptance = {
				target = culture:kipchak
				value = 50
				desc = cultural_acceptance_historical_relations
			}
		}
		culture:hindustani_proper = {
			change_cultural_acceptance = {
				target = culture:muslim_punjabi
				value = 50
				desc = cultural_acceptance_historical_relations
			}
		}
		culture:hindustani_proper = {
			change_cultural_acceptance = {
				target = culture:hindustani
				value = 50
				desc = cultural_acceptance_historical_relations
			}
		}
		culture:gothic = {
			change_cultural_acceptance = {
				target = culture:greek
				value = 15
				desc = cultural_acceptance_historical_relations
			}
		}
		culture:russian = {
			change_cultural_acceptance = {
				target = culture:belocroat
				value = 50
				desc = cultural_acceptance_historical_relations
			}
		}
		culture:tajik = {
			change_cultural_acceptance = {
				target = culture:persian
				value = 70
				desc = cultural_acceptance_historical_relations
			}
		}
		culture:baloch = {
			change_cultural_acceptance = {
				target = culture:sindhi
				value = 10
				desc = cultural_acceptance_historical_relations
			}
		}
		culture:arberian = {
			change_cultural_acceptance = {
				target = culture:serbian
				value = 15
				desc = cultural_acceptance_historical_relations
			}
		}
		culture:gothic = {
			change_cultural_acceptance = {
				target = culture:greek
				value = 15
				desc = cultural_acceptance_historical_relations
			}
		}
		if = {
			limit = {
				game_start_date = 1337.1.1
			}
			culture:dalmatian_ce = {
				change_cultural_acceptance = {
					target = culture:croatian
					value = 20
					desc = cultural_acceptance_historical_relations
				}
			}
			culture:arberian = {
				change_cultural_acceptance = {
					target = culture:sicilian
					value = 15
					desc = cultural_acceptance_historical_relations
				}
			}
		}
		if = {
			limit = {
				exists = title:k_italy.holder
				has_dlc_feature = royal_court
			}
			title:k_italy.holder = {
				create_artifact_pedestal_crown_iron_effect = { OWNER = title:k_italy.holder }
			}
		}
		if = {
			limit = { game_start_date = 1337.1.1 }
			if = {
				limit = {
					OR = {
						has_game_rule = matrilineal_marriages_never
						AND = {
							has_game_rule = matrilineal_marriages_female_and_equal
							has_game_rule = default_gender_equality
						}
					}
				}
				character:461703 = {
					create_betrothal = character:469513
				}
			} 
			else = {
				character:461703 = {
					create_betrothal_matrilineal = character:469513
				}
			}
		}
		every_living_character = {
			limit = {
				culture = culture:mon
			}
			unlearn_language = language_burmese
			learn_language = language_mon
		}
		every_living_character = {
			limit = {
				OR = {
					culture = culture:khitan
					culture = culture:tuyuhun
				}
			}
			unlearn_language = language_mongolic
			learn_language = language_xianbei
		}
		every_living_character = {
			limit = {
				culture = culture:old_saxon
			}
			unlearn_language = language_anglic
			learn_language = language_saxon
		}
		every_living_character = {
			limit = {
				OR = {
					dynasty = dynasty:7276
					dynasty = dynasty:7277
					dynasty = dynasty:101732
					dynasty = dynasty:101875
				}
			}
			learn_language = language_arabic
		}
		every_living_character = {
			limit = {
				dynasty = dynasty:1000102400
				NOT = { house = house:house_quglugh }
			}
			learn_language = language_chinese
		}
		culture:egyptian_coptic = {
			change_cultural_acceptance = {
				target = culture:egyptian
				value = 20
				desc = cultural_acceptance_historical_relations
			}
		}
		
		
		#Overwrite RICE changes
		
		title:c_socotra = {
			set_county_culture = culture:soqotri
		}		

		if = {
			limit = {
				title:c_socotra.holder = {
					highest_held_title_tier = tier_duchy
					culture = { has_cultural_pillar = heritage_arabic }
				}
			}
			title:c_socotra.holder = {
				make_socotra_culture_effect = yes
			}
		}	
		
		#Heritages
		
		culture:alan = {
			set_culture_pillar = heritage_iranian
		}
	
		#Traditions

		culture:severian = { add_culture_tradition = tradition_agrarian }
		culture:severian = { add_culture_tradition = tradition_polygamous }
		
		###SET DYNASTY CULTURES
		#For setting dynasties to the new cultures that exist in later bookmarks
		#If you set a parent house to get a culture that's different then a cadet branch then make sure that the parent houses culture is set BEFORE the cadets
		
		every_living_character = {
			limit = {
				game_start_date > 1250.1.1
				OR = {
					house = house:house_von_der_marck
					house = house:house_cleve
					dynasty = dynasty:7168
					dynasty = dynasty:12462
					dynasty = dynasty:7126
					dynasty = dynasty:432
				}
			}
			set_culture = culture:westphalian
		}
		
		every_living_character = {
			limit = {
				game_start_date > 1250.1.1
				OR = {
					dynasty = dynasty:7154
					dynasty = dynasty:101893
				}
			}
			set_culture = culture:german_pommeranian
		}
		
		every_living_character = {
			limit = {
				game_start_date > 1250.1.1
				OR = {
					dynasty = dynasty:177
					dynasty = dynasty:7163
				}
			}
			set_culture = culture:kashubian
		}
		
		every_living_character = {
			limit = {
				game_start_date > 1250.1.1
				OR = {
					dynasty = dynasty:1000103324
					dynasty = dynasty:1000103714
					dynasty = dynasty:226
					house = house:house_anhalt
				}
			}
			set_culture = culture:east_elbian
		}
		
		every_living_character = {
			limit = {
				game_start_date > 1250.1.1
				OR = {
					house = house:house_silesia #Maybe questionable to make the Silesian Piasts this but then again they were the ones that ended up under the HRE and the only nobility that ever hold Silesia for almost the entire game and into EU4's time period
				}
			}
			set_culture = culture:german_silesian 
		}
		
		every_living_character = {
			limit = {
				game_start_date > 1250.1.1
				OR = {
					dynasty = dynasty:88
					dynasty = dynasty:101558
					house = house:house_baden
					house = house:house_leining
				}
			}
			set_culture = culture:alsatian
		}
		
		every_living_character = {
			limit = {
				game_start_date > 1250.1.1
				OR = {
					dynasty = dynasty:12447
					dynasty = dynasty:101718
					dynasty = dynasty:100245
					dynasty = dynasty:7257
					house = house:house_habsurg
					house = house:house_hupoldinger
				}
			}
			set_culture = culture:high_alemannic
		}
		
		every_living_character = {
			limit = {
				game_start_date > 1250.1.1
				OR = {
					dynasty = dynasty:1000035155
					dynasty = dynasty:13059
					dynasty = dynasty:1000020094
					dynasty = dynasty:13068
					dynasty = dynasty:1042027
					dynasty = dynasty:1000020115
					dynasty = dynasty:101851
				}
			}
			set_culture = culture:romagnol
		}
		
		every_living_character = {
			limit = {
				game_start_date > 1250.1.1
				OR = {
					house = house:house_este
					dynasty = dynasty:1000020105
					dynasty = dynasty:101841
					dynasty = dynasty:1000035411
					house = house:house_canossa
					dynasty = dynasty:101820
					dynasty = dynasty:13064
					dynasty = dynasty:8726
					dynasty = dynasty:1000020071
					dynasty = dynasty:1000020081
					dynasty = dynasty:1000020076
				}
			}
			set_culture = culture:emilian
		}
		
		every_living_character = {
			limit = {
				game_start_date > 1250.1.1
				OR = {
					house = house:house_vasto
					dynasty = dynasty:206
					dynasty = dynasty:1000035309
					dynasty = dynasty:1000035413
					dynasty = dynasty:1000035412
					dynasty = dynasty:1000035324
					dynasty = dynasty:1000020087
					dynasty = dynasty:1000035311
				}
			}
			set_culture = culture:piedmontese
		}
		
		every_living_character = {
			limit = {
				game_start_date > 1250.1.1
				OR = {
					house = house:house_cinarca
					house = house:house_cozzi
					dynasty = dynasty:1000036007
				}
			}
			set_culture = culture:corsican
		}
		
		every_living_character = {
			limit = {
				game_start_date > 1250.1.1
				OR = {
					house = house:house_megas_komnenos
					dynasty = dynasty:634
					dynasty = dynasty:101274
				}
			}
			set_culture = culture:pontic
		}
		
		every_living_character = {
			limit = {
				game_start_date > 1250.1.1
				OR = {
					dynasty = dynasty:7335
				}
			}
			set_culture = culture:luri
		}
		
		every_living_character = {
			limit = {
				game_start_date > 1250.1.1
				OR = {
					dynasty = dynasty:1042081
					dynasty = dynasty:1044390
				}
			}
			set_culture = culture:harauti
		}
		
		every_living_character = {
			limit = {
				game_start_date > 1250.1.1
				OR = {
					dynasty = dynasty:1042091
					dynasty = dynasty:1044391
					house = house:house_ChahamanasofJalor
					house = house:house_ChauhanofSatyapura
					house = house:house_ChauhanofSirohi
				}
			}
			set_culture = culture:marwari
		}
		
		every_living_character = {
			limit = {
				game_start_date > 1250.1.1
				OR = {
					dynasty = dynasty:1042079
					house = house:house_sisodia
				}
			}
			set_culture = culture:mewari
		}
		
		every_living_character = {
			limit = {
				game_start_date > 1250.1.1
				OR = {
					dynasty = dynasty:1044383
					dynasty = dynasty:1044382
				}
			}
			set_culture = culture:dhundari
		}
		
		every_living_character = {
			limit = {
				game_start_date > 1250.1.1
				OR = {
					house = house:house_ChahamanaofDadrewa
				}
			}
			set_culture = culture:ahirwati
		}
		
		#####################Slavic Religion#####################
		
		
		#Convert all the Slavic counties to separate faiths
		#To basically handle the one area where there'd be meaningful compatibility issues with 'Children of Perun'
		every_county = {
			#East
			if = {
				limit = {
					culture = {
						OR = {
							has_cultural_pillar = heritage_east_slavic
							has_cultural_pillar = heritage_north_germanic #To convert counties where Nordic rulers are
							has_cultural_pillar = heritage_magyar
							has_cultural_pillar = heritage_baltic
							has_cultural_pillar = heritage_iranian
							has_cultural_pillar = heritage_volga_finnic
						}
					}
					religion = religion:slavic_religion
				}
				set_county_faith = faith:slavic_east
			}
			#South
			if = {
				limit = {
					culture = {
						OR = {
							has_cultural_pillar = heritage_south_slavic
							has_cultural_pillar = heritage_vlach
						}
					}
					religion = religion:slavic_religion
				}
				set_county_faith = faith:slavic_south
			}
			#West
			if = {
				limit = {
					culture = { has_cultural_pillar = heritage_west_slavic }
					religion = religion:slavic_religion
				}
				set_county_faith = faith:slavic_west
			}
		}
		faith:slavic_pagan = {
			#Do the same for characters. Need more cultures for various weird courtiers
			every_faith_character = {
				#East
				if = {
					limit = {
						culture = {
							OR = {
								has_cultural_pillar = heritage_east_slavic
								has_cultural_pillar = heritage_volga_finnic
								has_cultural_pillar = heritage_north_germanic
							}
						}
					}
					set_character_faith = faith:slavic_east
				}
				#South
				if = {
					limit = {
						culture = {
							OR = {
								has_cultural_pillar = heritage_south_slavic
								has_cultural_pillar = heritage_turkic
								has_cultural_pillar = heritage_vlach
							}
						}
					}
					set_character_faith = faith:slavic_south
				}
				#West
				if = {
					limit = {
						culture = { has_cultural_pillar = heritage_west_slavic }
					}
					set_character_faith = faith:slavic_west
				}
			}
		}
		
		
		############################################
		
		#Buildings post 1200 - Something to do over time
		
		if = {
			limit = {
				game_start_date > 1200.1.1
			}
			
			
			#Castles
			
			province:1887 = {
				add_building = castle_02
			}	
			province:1806 = {
				add_building = castle_02
			}
			province:1816 = {
				add_building = castle_02
			}
			province:1754 = {
				add_building = castle_02
			}
			province:1995 = {
				add_building = castle_02
			}
			province:1855 = {
				add_building = castle_02
			}
			province:1919 = {
				add_building = castle_02
			}
			province:2214 = {
				add_building = castle_02
			}
			province:2152 = {
				add_building = castle_02
			}
			province:1665 = {
				add_building = castle_02
			}
			province:1741 = {
				add_building = castle_02
			}
			province:2092 = {
				add_building = castle_02
			}
			province:63 = {
				add_building = castle_02
			}
			province:341 = {
				add_building = castle_02
			}
			province:234 = {
				add_building = castle_02
			}
			province:527 = {
				add_building = castle_02
			}
			province:3803 = {
				add_building = castle_02
			}
			province:473 = {
				add_building = castle_02
			}
			province:678 = {
				add_building = castle_02
			}
			province:9862 = {
				add_building = castle_02
			}
			
			
		}
		
		############################################
		
		#Increase building slots for some major cities//deal with errors about a holding not having enough slots for buildings its set to have in history
		
		if = {
			limit = {
				game_start_date > 866.1.1
			}
			
			title:b_napoli.title_province = { 
			
				add_building_slot = 2
				
			}
			
			title:b_hanau.title_province = { 
			
				add_building_slot = 1
				
			}
			
			title:b_marseille.title_province = { 
			
				add_building_slot = 1
				
			}
			
			title:b_lisboa.title_province = { 
			
				add_building_slot = 1
				
			}
			
			title:b_toledo.title_province = { 
			
				add_building_slot = 1
				
			}
			
			title:b_pamplona.title_province = { 
			
				add_building_slot = 1
				
			}
			
			title:b_burgos.title_province = { 
			
				add_building_slot = 1
				
			}
			
			title:b_winchester.title_province = { 
			
				add_building_slot = 1
				
			}
			
			title:b_edinburgh.title_province = { 
			
				add_building_slot = 1
				
			}
			
			title:b_milano.title_province = { 
			
				add_building_slot = 1
				
			}
			
			title:b_bologna.title_province = { 
			
				add_building_slot = 1
				
			}
			
			title:b_pisa.title_province = { 
			
				add_building_slot = 1
				
			}
			
			title:b_palermo.title_province = { 
			
				add_building_slot = 1
				
			}
			
			title:b_syracusa.title_province = { 
			
				add_building_slot = 1
				
			}
			
			title:b_praha.title_province = { 
			
				add_building_slot = 1
				
			}
			
			title:b_krakow.title_province = { 
			
				add_building_slot = 1
				
			}
			
			title:b_sighnaq.title_province = { 
			
				add_building_slot = 1
				
			}
			
			title:b_trebizond.title_province = { 
			
				add_building_slot = 1
				
			}
			
			title:b_tekor.title_province = { 
			
				add_building_slot = 1
				
			}
			
			title:b_tbilisi.title_province = { 
			
				add_building_slot = 1
				
			}
			
			title:b_tabriz.title_province = { 
			
				add_building_slot = 1
				
			}
			
			title:b_rayy.title_province = { 
			
				add_building_slot = 1
				
			}
			
			title:b_oslosyslar.title_province = { 
			
				add_building_slot = 1
				
			}
			
			title:b_cordoba.title_province = { 
			
				add_building_slot = 1
				
			}
			
			title:b_regensburg.title_province = { 
			
				add_building_slot = 1
				
			}
			
			title:b_linz.title_province = { 
			
				add_building_slot = 1
				
			}
			
			title:b_acre.title_province = { 
			
				add_building_slot = 1
				
			}
			
			title:b_neuss.title_province = { 
			
				add_building_slot = 1
				
			}
		
		}

		
}


# Like on_game_start, except it is called once the host (or player, in single player) exits the lobby. Good for anything where you need to know who the players are, or what the game rules are
on_game_start_after_lobby = {
	on_actions = {
		MB_setup_after_game_start_on_actions
	}
}

MB_setup_after_game_start_on_actions = {
	effect = {
		every_player = { # Intro event
		 	trigger_event = MBintro.0001
		}

	}
}
