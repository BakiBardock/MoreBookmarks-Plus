establish_appeasement = {
	set_variable = { name = nobility_appeasement value = 50 }
	set_variable = { name = clergy_appeasement value = 50 }
	set_variable = { name = popular_appeasement value = 50 }
	specific_post_appeasement = { CLASS = nobility }
	specific_post_appeasement = { CLASS = clergy }
	specific_post_appeasement = { CLASS = popular }
}

republic_succession = {
	ordered_in_list = {
		variable = republic_families_list
		order_by = family_respect
		position = 0
		house_head = { save_scope_as = electee_one }
	}
	ordered_in_list = {
		variable = republic_families_list
		order_by = family_respect
		position = 1
		if = {
			limit = { NOT = { house_head = scope:electee_one } }
			house_head = { save_scope_as = electee_two }
		}
	}
	ordered_in_list = {
		variable = republic_families_list
		order_by = family_respect
		position = 2
		if = {
			limit = { NAND = { house_head = scope:electee_one house_head = scope:electee_two } }
			house_head = { save_scope_as = electee_three }
		}
	}
	ordered_in_list = {
		variable = republic_families_list
		order_by = family_respect
		position = 3
		if = {
			limit = { NAND = { house_head = scope:electee_one house_head = scope:electee_two house_head = scope:electee_three } }
			house_head = { save_scope_as = electee_four }
		}
	}
	ordered_in_list = {
		variable = republic_families_list
		order_by = family_respect
		position = 4
		if = {
			limit = { NAND = { house_head = scope:electee_one house_head = scope:electee_two house_head = scope:electee_three house_head = scope:electee_four } }
			house_head = { save_scope_as = electee_five }
		}
	}
	every_in_list = {
		variable = republic_families_list
		house_head = {
			trigger_event = republic_vote_events.1013
		}
	}
	var:republic_owner = {
		trigger_event = {
			id = republic_vote_events.1014
			days = 2
		}
	}
}

main_republic_succession = {
	var:republic_owner = { save_scope_as = old_holder }
	if = {
		limit = { NOT = { scope:election_winner = scope:old_holder } }
		var:republic_owner = {
			capital_county = {
				save_scope_as = old_capital
			}
			remove_variable = republic_head
			if = {
				limit = {
					is_ai = no
				}
				set_variable = play_on
			}
			if = {
				limit = { scope:old_holder = { is_independent_ruler = no } }
				scope:old_holder.liege = { save_scope_as = new_liege }
			}
			create_title_and_vassal_change = {
				type = granted
				save_scope_as = title_change
				add_claim_on_loss = no
			}
			scope:old_capital = {
				change_title_holder = {
					holder = scope:election_winner
					change = scope:title_change
				}
			}
			primary_title = {
				change_title_holder = {
					holder = scope:election_winner
					change = scope:title_change
				}
				save_scope_as = primary_title_carrying_over
			}
			if = {
				limit = { highest_held_title_tier = tier_duchy }
				every_held_title = {
					limit = { tier = tier_duchy NOT = { scope:primary_title_carrying_over = this } }
					change_title_holder = {
						holder = scope:election_winner
						change = scope:title_change
					}
				}
			}
			if = {
				limit = { highest_held_title_tier = tier_kingdom }
				every_held_title = {
					limit = { tier = tier_kingdom NOT = { scope:primary_title_carrying_over = this } }
					change_title_holder = {
						holder = scope:election_winner
						change = scope:title_change
					}
				}
			}
			if = {
				limit = { highest_held_title_tier = tier_empire }
				every_held_title = {
					limit = { tier = tier_empire NOT = { scope:primary_title_carrying_over = this } }
					change_title_holder = {
						holder = scope:election_winner
						change = scope:title_change
					}
				}
			}
			random_ruler = {
				save_scope_as = quick_switch
			}
			if = {
				limit = {
					scope:old_holder = {
						exists = var:play_on
						has_global_variable = play_republic_leaders
					}
				}
				set_player_character = scope:quick_switch
			}
			resolve_title_and_vassal_change = scope:title_change
			# if = {
			# 	limit = {
			# 		scope:old_holder = {
			# 			exists = var:play_on
			# 			has_global_variable = play_republic_leaders
			# 		}
			# 	}
			# 	set_player_character = scope:election_winner
			# }
			if = {
				limit = {
					exists = scope:new_liege
				}
				create_title_and_vassal_change = {
					type = swear_fealty
					save_scope_as = change
				}
				scope:election_winner = {
					change_liege = {
						liege = scope:new_liege
						change = scope:change
					}
				}
				resolve_title_and_vassal_change = scope:change
			}
			if = {
				limit = {
					scope:old_holder = {
						exists = var:play_on
						has_global_variable = play_republic_leaders
					}
				}
				scope:quick_switch = { set_player_character = scope:election_winner }
			}
			remove_variable = play_on
			scope:old_holder = {
				if = {
					limit = { is_landed = no }
					set_employer = scope:election_winner
				}
				if = {
					limit = { is_landed = yes }
					create_title_and_vassal_change = {
						type = swear_fealty
						save_scope_as = change
					}
					scope:old_holder = {
						change_liege = {
							liege = scope:election_winner
							change = scope:change
						}
					}
					resolve_title_and_vassal_change = scope:change
				}
			}
		}
		scope:election_winner = {
			change_government = res_republic_government
			capital_barony.title_province = { set_holding_type = city_holding }
			add_realm_law = republic_succession_law
			add_realm_law = crown_authority_2
			house.var:titular_republic = { make_story_owner = scope:election_winner remove_variable = republic_owner set_variable = { name = republic_owner value = scope:election_winner } }
			set_variable = { name = republic_head value = house.var:titular_republic }
			house = {
				set_variable = {
					name = temporary_change_prestige
					value = -500
					years = 10
				}
			}
			primary_title = {
				set_capital_county = scope:old_capital
			}
		}
	}
	if = {
		limit = { NOT = { exists = var:current_death } }
		scope:election_winner = {
			trigger_event = {
				id = merchant_republic_events.1006
				days = 1
			}
		}
	}
	every_in_list = {
		variable = republic_families_list
		limit = { NOT = { any_house_member = { this = scope:election_winner } } any_house_member = { this = scope:old_holder } }
		house_head = {
			trigger_event = {
				id = merchant_republic_events.1003
				days = 1
			}
		}
	}
	every_in_list = {
		variable = republic_families_list
		limit = { any_house_member = { this = scope:election_winner } NOT = { house_head = scope:election_winner } NOT = { any_house_member = { this = scope:old_holder } } }
		house_head = {
			trigger_event = {
				id = merchant_republic_events.1004
				days = 1
			}
		}
	}
	every_in_list = {
		variable = republic_families_list
		limit = { NOT = { any_house_member = { this = scope:election_winner } any_house_member = { this = scope:old_holder } } }
		house_head = {
			trigger_event = {
				id = merchant_republic_events.1005
				days = 1
			}
		}
	}
	every_in_list = {
		variable = republic_families_list
		limit = { any_house_member = { this = scope:election_winner } NOT = { house_head = scope:election_winner } any_house_member = { this = scope:old_holder } }
		house_head = {
			trigger_event = {
				id = merchant_republic_events.1007
				days = 1
			}
		}
	}
	every_in_list = {
		variable = republic_families_list
		house_head = {
			add_opinion = {
				target = scope:election_winner
				modifier = new_elected_ruler
			}
		}
	}
}

death_republic_succession = {
	ordered_in_list = {
		variable = republic_families_list
		order_by = family_respect
		position = 0
		save_scope_as = highest
	}
	scope:highest = {
		if = {
			limit = { NOT = { house_head = root.var:republic_owner } }
			house_head = { save_scope_as = election_winner }
		}
		else_if = {
			limit = { house_head = root.var:republic_owner }
			house_head.primary_heir = { save_scope_as = election_winner }
		}
	}
	var:republic_owner = {
		save_scope_as = old_holder
		capital_county = { save_scope_as = old_capital }
		if = { limit = { is_ai = no } set_variable = play_on }
		random_ruler = { save_scope_as = quick_switch }
		create_title_and_vassal_change = {
			type = granted
			save_scope_as = title_change
			add_claim_on_loss = no
		}
		capital_county = {
			change_title_holder = {
				holder = scope:election_winner
				change = scope:title_change
			}
		}
		primary_title = {
			change_title_holder = {
				holder = scope:election_winner
				change = scope:title_change
			}
			save_scope_as = primary_title_carrying_over
		}
		if = {
			limit = { highest_held_title_tier = tier_duchy }
			every_held_title = {
				limit = { tier = tier_duchy NOT = { scope:primary_title_carrying_over = this } }
				change_title_holder = {
					holder = scope:election_winner
					change = scope:title_change
				}
			}
		}
		if = {
			limit = { highest_held_title_tier = tier_kingdom NOT = { scope:primary_title_carrying_over = this } }
			every_held_title = {
				limit = { tier = tier_kingdom }
				change_title_holder = {
					holder = scope:election_winner
					change = scope:title_change
				}
			}
		}
		if = {
			limit = { highest_held_title_tier = tier_empire NOT = { scope:primary_title_carrying_over = this } }
			every_held_title = {
				limit = { tier = tier_empire }
				change_title_holder = {
					holder = scope:election_winner
					change = scope:title_change
				}
			}
		}
		if = {
			limit = {
				exists = var:play_on
				has_global_variable = play_republic_leaders
			}
			set_player_character = scope:quick_switch
		}
		resolve_title_and_vassal_change = scope:title_change
		if = {
			limit = {
				exists = var:play_on
				has_global_variable = play_republic_leaders
			}
			scope:quick_switch = { set_player_character = scope:election_winner }
		}
		remove_variable = play_on
		scope:old_holder = {
			if = {
				limit = { is_landed = no }
				set_employer = scope:election_winner
			}
			if = {
				limit = { is_landed = yes }
				create_title_and_vassal_change = {
					type = swear_fealty
					save_scope_as = change
				}
				scope:old_holder = {
					change_liege = {
						liege = scope:election_winner
						change = scope:change
					}
				}
				resolve_title_and_vassal_change = scope:change
			}
		}
		scope:election_winner = {
			change_government = res_republic_government
			capital_barony = {
				set_holding_type = city_holding
			}
			add_realm_law = republic_succession_law
			add_realm_law = crown_authority_2
			set_variable = { name = republic_head value = house.var:titular_republic }
			var:republic_head = { make_story_owner = scope:election_winner remove_variable = republic_owner set_variable = { name = republic_owner value = scope:election_winner } }
			house = {
				set_variable = {
					name = temporary_change_prestige
					value = -500
					years = 10
				}
			}
			primary_title = {
				set_capital_county = scope:old_capital
			}
		}
	}
	if = {
		limit = { NOT = { exists = var:current_death } }
		scope:election_winner = {
			trigger_event = {
				id = merchant_republic_events.1006
				days = 1
			}
		}
	}
	every_in_list = {
		variable = republic_families_list
		limit = { NOT = { any_house_member = { this = scope:election_winner } } any_house_member = { this = scope:old_holder } }
		house_head = {
			trigger_event = {
				id = merchant_republic_events.1003
				days = 1
			}
		}
	}
	every_in_list = {
		variable = republic_families_list
		limit = { any_house_member = { this = scope:election_winner } NOT = { any_house_member = { this = scope:old_holder } } }
		house_head = {
			trigger_event = {
				id = merchant_republic_events.1004
				days = 1
			}
		}
	}
	every_in_list = {
		variable = republic_families_list
		limit = { NAND = { any_house_member = { this = scope:election_winner } any_house_member = { this = scope:old_holder } } }
		house_head = {
			trigger_event = {
				id = merchant_republic_events.1005
				days = 1
			}
		}
	}
	every_in_list = {
		variable = republic_families_list
		limit = { any_house_member = { this = scope:election_winner } any_house_member = { this = scope:old_holder } }
		house_head = {
			trigger_event = {
				id = merchant_republic_events.1007
				days = 1
			}
		}
	}
}

### SETUP REPUBLICS ###
set_up_basic_republic = {
	create_story = {
		type = story_cycle_republic
		save_scope_as = new_republic_story
	}
	set_variable = {
		name = republic_head
		value = scope:new_republic_story
	}
	change_government = res_republic_government
	capital_barony.title_province = { set_holding_type = city_holding }
	scope:new_republic_story = {
		every_valid_patrician_for_republic = {
			add_family_to_republic_families = yes
		}
	}
	add_family_to_republic_families = yes
	add_realm_law_skip_effects = crown_authority_2
	add_realm_law_skip_effects = republic_succession_law
	primary_title = {
		remove_title_law = feudal_elective_succession_law
		remove_title_law = princely_elective_succession_law
		remove_title_law = saxon_elective_succession_law
		remove_title_law = scandinavian_elective_succession_law
		remove_title_law = gaelic_elective_succession_law
		remove_title_law = temporal_head_of_faith_succession_law
	}
}

set_up_senate_republic = {
	set_up_basic_republic = {}
	# remove_all_current_laws = yes
	scope:new_republic_story = {
		set_variable = { name = republic_government_type value = 0 }
		set_variable = { name = senators_count value = 100 }
		set_variable = { name = war_declaration_law value = 1 }
		set_variable = { name = council_appointment_law value = 0 }
		set_variable = { name = imprisonment_rights_law value = 1 }
		set_variable = { name = title_powers_law value = 1 }
		set_variable = { name = term_limits_law value = 7 }
		every_in_list = {
			variable = republic_families_list
			set_variable = { name = house_senators value = 0 }
		}
		republic_senator_elections = yes
	}
	every_councillor = {
		save_scope_as = council_new
		scope:new_republic_story = {
			add_to_variable_list = {
				name = valid_council_targets_list
				target = scope:council_new
			}
		}
	}
}

set_up_council_republic = {
	set_up_basic_republic = {}
	# remove_all_current_laws = yes
	scope:new_republic_story = {
		set_variable = { name = republic_government_type value = 1 }
		set_variable = { name = war_declaration_law value = 2 }
		set_variable = { name = council_appointment_law value = 0 }
		set_variable = { name = imprisonment_rights_law value = 2 }
		set_variable = { name = title_powers_law value = 2 }
		set_variable = { name = term_limits_law value = 8 }
		establish_appeasement = yes
		republic_council_succesion = yes
	}
	every_councillor = {
		save_scope_as = council_new
		scope:new_republic_story = {
			add_to_variable_list = {
				name = valid_council_targets_list
				target = scope:council_new
			}
		}
	}
}

set_up_elected_ruler_republic = {
	set_up_basic_republic = {}
	# remove_all_current_laws = yes
	scope:new_republic_story = {
		set_variable = { name = republic_government_type value = 2 }
		set_variable = { name = war_declaration_law value = 0 }
		set_variable = { name = council_appointment_law value = 0 }
		set_variable = { name = imprisonment_rights_law value = 0 }
		set_variable = { name = title_powers_law value = 0 }
		set_variable = { name = term_limits_law value = 11 }
	}
}

set_up_bicameral_republic = {
	set_up_basic_republic = {}
	# remove_all_current_laws = yes
	scope:new_republic_story = {
		set_variable = { name = republic_government_type value = 3 }
		set_variable = { name = war_declaration_law value = 0 }
		set_variable = { name = council_appointment_law value = 0 }
		set_variable = { name = imprisonment_rights_law value = 4 }
		set_variable = { name = title_powers_law value = 4 }
		set_variable = { name = term_limits_law value = 8 }

		clear_variable_list = lower_house_counties
		# set_variable = both_houses_vote_citizenship
		# set_variable = same_culture_group_citizenship
		# set_variable = same_religion_group_citizenship
		# set_variable = de_facto_citizenship
		generate_counties_for_lower_house = yes
		hidden_effect = {
			random_list = {
				30 = {
					set_variable = xenophobic
				}
				30 = {
					set_variable = xenophilic
				}
				40 = {
					set_variable = c_ambivalence
				}
			}
			random_list = {
				30 = {
					set_variable = religiocentric
				}
				30 = {
					set_variable = tolerant
				}
				40 = {
					set_variable = r_ambivalence
				}
			}
			random_list = {
				50 = {
					set_variable = insular
				}
				50 = {
					set_variable = receptive
				}
			}
			random_list = {
				15 = {
					set_variable = very_warlike
				}
				20 = {
					set_variable = warlike
				}
				30 = {
					set_variable = neutral
				}
				20 = {
					set_variable = peaceful
				}
				15 = {
					set_variable = very_peaceful
				}
			}
		}
	}
}

basic_reform_effect = {
	house.var:titular_republic = {
		set_variable = {
			name = reformed_recently
			years = 100
		}
		end_story = yes
	}
}

reform_into_elected_ruler_republic = {
	basic_reform_effect = yes
	set_up_elected_ruler_republic = yes
}

reform_into_senate_republic = {
	basic_reform_effect = yes
	set_up_senate_republic = yes
}

reform_into_council_republic = {
	basic_reform_effect = yes
	set_up_council_republic = yes
}

reform_into_bicameral_republic = {
	basic_reform_effect = yes
	set_up_bicameral_republic = yes
}

add_family_to_republic_families = {
	house = {
		save_scope_as = house_to_add
		set_variable = { name = family_prestige value = 0 }
	}
	if = {
		limit = { exists = liege_or_court_owner liege_or_court_owner = { holds_valid_merchant_republic = yes } }
		liege_or_court_owner.var:republic_head = {
			add_to_variable_list = {
				name = republic_families_list
				target = scope:house_to_add
			}
			save_scope_as = title_republic
		}
	}
	if = {
		limit = { exists = var:republic_head }
		var:republic_head = {
			add_to_variable_list = {
				name = republic_families_list
				target = scope:house_to_add
			}
			save_scope_as = title_republic
		}
	}
	house = {
		set_variable = {
			name = titular_republic
			value = scope:title_republic
		}
		if = {
			limit = { exists = var:titular_republic.var:republic_government_type var:titular_republic.var:republic_government_type = 1 }
			set_variable = {
				name = house_senators
				value = 0
			}
		}
	}
}

remove_all_current_laws = {
	house.var:titular_republic = {
		remove_variable = republic_government_type
		remove_variable = war_declaration_law
		remove_variable = title_powers_law
		remove_variable = imprisonment_rights_law
		remove_variable = council_appointment_law
		remove_variable = term_limits_law
		clear_variable_list = proposed_laws_list
		clear_variable_list = proposed_law_types_list
		clear_variable_list = law_proposers_list

		# Council Unique
		remove_variable = nobility_appeasement
		remove_variable = clergy_appeasement
		remove_variable = popular_appeasement
		remove_variable = councillor_1
		remove_variable = councillor_2
		remove_variable = councillor_3
		remove_variable = councillor_4
		remove_variable = councillor_5

		# Senate Unique
		remove_variable = senators_count
		remove_variable = current_dictatorship
		remove_variable = forced_dictatorship

		# remove_variable = both_houses_vote_citizenship
		# remove_variable = lower_house_vote_citizenship
		# remove_variable = higher_house_vote_citizenship
		# remove_variable = leaders_discretion_citizenship
		# remove_variable = same_culture_citizenship
		# remove_variable = same_culture_group_citizenship
		# remove_variable = all_cultures_citizenship
		# remove_variable = same_faith_citizenship
		# remove_variable = same_religion_group_citizenship
		# remove_variable = all_religions_citizenship
		# remove_variable = de_jure_citizenship
		# remove_variable = de_facto_citizenship

		# Bicameral Unique
		remove_variable = xenophilic
		remove_variable = xenophobic
		remove_variable = r_ambivalence
		remove_variable = religiocentric
		remove_variable = tolerant
		remove_variable = c_ambivalence
		remove_variable = very_warlike
		remove_variable = warlike
		remove_variable = neutral
		remove_variable = peaceful
		remove_variable = very_peaceful
		remove_variable = insular
		remove_variable = receptive

	}
}

all_senate_laws = {
	add_to_global_variable_list = { name = senate_laws_list target = flag:war_declaration_law_0 }
	add_to_global_variable_list = { name = senate_laws_list target = flag:war_declaration_law_1 }
	add_to_global_variable_list = { name = senate_laws_list target = flag:council_appointment_law_0 }
	add_to_global_variable_list = { name = senate_laws_list target = flag:council_appointment_law_1 }
	add_to_global_variable_list = { name = senate_laws_list target = flag:imprisonment_rights_law_0 }
	add_to_global_variable_list = { name = senate_laws_list target = flag:imprisonment_rights_law_1 }
	add_to_global_variable_list = { name = senate_laws_list target = flag:title_powers_law_0 }
	add_to_global_variable_list = { name = senate_laws_list target = flag:title_powers_law_1 }
	add_to_global_variable_list = { name = senate_laws_list target = flag:term_limits_law_11 }
	add_to_global_variable_list = { name = senate_laws_list target = flag:term_limits_law_10 }
	add_to_global_variable_list = { name = senate_laws_list target = flag:term_limits_law_9 }
	add_to_global_variable_list = { name = senate_laws_list target = flag:term_limits_law_8 }
	add_to_global_variable_list = { name = senate_laws_list target = flag:term_limits_law_7 }
	add_to_global_variable_list = { name = senate_laws_list target = flag:term_limits_law_6 }
}

all_elected_ruler_laws = {
	add_to_global_variable_list = { name = elected_ruler_laws_list target = flag:term_limits_law_11 }
	add_to_global_variable_list = { name = elected_ruler_laws_list target = flag:term_limits_law_10 }
	add_to_global_variable_list = { name = elected_ruler_laws_list target = flag:term_limits_law_9 }
	add_to_global_variable_list = { name = elected_ruler_laws_list target = flag:term_limits_law_8 }
	add_to_global_variable_list = { name = elected_ruler_laws_list target = flag:term_limits_law_7 }
	add_to_global_variable_list = { name = elected_ruler_laws_list target = flag:term_limits_law_6 }
}

all_council_laws = {
	add_to_global_variable_list = { name = council_laws_list target = flag:war_declaration_law_0 }
	add_to_global_variable_list = { name = council_laws_list target = flag:war_declaration_law_2 }
	add_to_global_variable_list = { name = council_laws_list target = flag:council_appointment_law_0 }
	add_to_global_variable_list = { name = council_laws_list target = flag:council_appointment_law_2 }
	add_to_global_variable_list = { name = council_laws_list target = flag:imprisonment_rights_law_0 }
	add_to_global_variable_list = { name = council_laws_list target = flag:imprisonment_rights_law_2 }
	add_to_global_variable_list = { name = council_laws_list target = flag:title_powers_law_0 }
	add_to_global_variable_list = { name = council_laws_list target = flag:title_powers_law_2 }
	add_to_global_variable_list = { name = council_laws_list target = flag:term_limits_law_11 }
	add_to_global_variable_list = { name = council_laws_list target = flag:term_limits_law_10 }
	add_to_global_variable_list = { name = council_laws_list target = flag:term_limits_law_9 }
	add_to_global_variable_list = { name = council_laws_list target = flag:term_limits_law_8 }
	add_to_global_variable_list = { name = council_laws_list target = flag:term_limits_law_7 }
	add_to_global_variable_list = { name = council_laws_list target = flag:term_limits_law_6 }
}

all_bicameral_laws = {
	add_to_global_variable_list = { name = bicameral_laws_list target = flag:war_declaration_law_0 }
	add_to_global_variable_list = { name = bicameral_laws_list target = flag:war_declaration_law_3 }
	add_to_global_variable_list = { name = bicameral_laws_list target = flag:war_declaration_law_4 }
	add_to_global_variable_list = { name = bicameral_laws_list target = flag:war_declaration_law_5 }
	add_to_global_variable_list = { name = bicameral_laws_list target = flag:council_appointment_law_0 }
	add_to_global_variable_list = { name = bicameral_laws_list target = flag:council_appointment_law_3 }
	add_to_global_variable_list = { name = bicameral_laws_list target = flag:council_appointment_law_4 }
	add_to_global_variable_list = { name = bicameral_laws_list target = flag:council_appointment_law_5 }
	add_to_global_variable_list = { name = bicameral_laws_list target = flag:imprisonment_rights_law_0 }
	add_to_global_variable_list = { name = bicameral_laws_list target = flag:imprisonment_rights_law_3 }
	add_to_global_variable_list = { name = bicameral_laws_list target = flag:imprisonment_rights_law_4 }
	add_to_global_variable_list = { name = bicameral_laws_list target = flag:imprisonment_rights_law_5 }
	add_to_global_variable_list = { name = bicameral_laws_list target = flag:title_powers_law_0 }
	add_to_global_variable_list = { name = bicameral_laws_list target = flag:title_powers_law_3 }
	add_to_global_variable_list = { name = bicameral_laws_list target = flag:title_powers_law_4 }
	add_to_global_variable_list = { name = bicameral_laws_list target = flag:title_powers_law_5 }
	add_to_global_variable_list = { name = bicameral_laws_list target = flag:term_limits_law_11 }
	add_to_global_variable_list = { name = bicameral_laws_list target = flag:term_limits_law_10 }
	add_to_global_variable_list = { name = bicameral_laws_list target = flag:term_limits_law_9 }
	add_to_global_variable_list = { name = bicameral_laws_list target = flag:term_limits_law_8 }
	add_to_global_variable_list = { name = bicameral_laws_list target = flag:term_limits_law_7 }
	add_to_global_variable_list = { name = bicameral_laws_list target = flag:term_limits_law_6 }
	# add_to_global_variable_list = { name = bicameral_culture_citizenship_list target = flag:same_culture_citizenship }
	# add_to_global_variable_list = { name = bicameral_culture_citizenship_list target = flag:same_culture_group_citizenship }
	# add_to_global_variable_list = { name = bicameral_culture_citizenship_list target = flag:all_cultures_citizenship }
	# add_to_global_variable_list = { name = bicameral_faith_citizenship_list target = flag:same_faith_citizenship }
	# add_to_global_variable_list = { name = bicameral_faith_citizenship_list target = flag:same_religion_group_citizenship }
	# add_to_global_variable_list = { name = bicameral_faith_citizenship_list target = flag:all_religions_citizenship }
	# add_to_global_variable_list = { name = bicameral_hierarchy_citizenship_list target = flag:de_jure_citizenship }
	# add_to_global_variable_list = { name = bicameral_hierarchy_citizenship_list target = flag:de_facto_citizenship }
}

initialize_global_election_terms = {
	if = {
		limit = { NOT = { exists = global_var:set_up_global_election_terms } }
		set_global_variable = {
			name = set_up_global_election_terms
			value = yes
		}
		trigger_event = {
			on_action = twenty_year_elections
			years = 20
		}
		trigger_event = {
			on_action = ten_year_elections
			years = 10
		}
		trigger_event = {
			on_action = four_year_elections
			years = 4
		}
		trigger_event = {
			on_action = two_year_elections
			years = 2
		}
		trigger_event = {
			on_action = one_year_elections
			years = 1
		}
	}
}

republic_council_succesion = {
	if = {
		limit = { var:republic_owner = { republic_has_council_form = yes } }
		remove_variable = councillor_1
		remove_variable = councillor_2
		remove_variable = councillor_3
		remove_variable = councillor_4
		remove_variable = councillor_5
		ordered_in_list = {
			variable = republic_families_list
			order_by = family_respect
			position = 0
			set_variable = republic_councillor
			save_scope_as = number_1_house
			house_head = {
				trigger_event = {
					id = merchant_republic_events.1008
					days = 1
				}
			}
		}
		ordered_in_list = {
			variable = republic_families_list
			order_by = family_respect
			position = 1
			set_variable = republic_councillor
			save_scope_as = number_2_house
			house_head = {
				trigger_event = {
					id = merchant_republic_events.1008
					days = 1
				}
			}
		}
		ordered_in_list = {
			variable = republic_families_list
			order_by = family_respect
			position = 2
			set_variable = republic_councillor
			save_scope_as = number_3_house
			house_head = {
				trigger_event = {
					id = merchant_republic_events.1008
					days = 1
				}
			}
		}
		ordered_in_list = {
			variable = republic_families_list
			order_by = family_respect
			position = 3
			set_variable = republic_councillor
			save_scope_as = number_4_house
			house_head = {
				trigger_event = {
					id = merchant_republic_events.1008
					days = 1
				}
			}
		}
		ordered_in_list = {
			variable = republic_families_list
			order_by = family_respect
			position = 4
			set_variable = republic_councillor
			save_scope_as = number_5_house
			house_head = {
				trigger_event = {
					id = merchant_republic_events.1008
					days = 1
				}
			}
		}
		set_variable = {
			name = councillor_1
			value = scope:number_1_house
		}
		set_variable = {
			name = councillor_2
			value = scope:number_2_house
		}
		set_variable = {
			name = councillor_3
			value = scope:number_3_house
		}
		set_variable = {
			name = councillor_4
			value = scope:number_4_house
		}
		set_variable = {
			name = councillor_5
			value = scope:number_5_house
		}
	}
}

# trigger_elected_ruler_quick_election = {
# 	ordered_in_list = {
# 		variable = proposed_laws_list
# 		position = 0
# 		save_scope_as = law_proposed
# 	}
# 	if = {
# 		limit = { scope:law_proposed = flag:5 }
# 		set_variable = law_voting_life_title_term
# 	}
# 	if = {
# 		limit = { scope:law_proposed = flag:4 }
# 		set_variable = law_voting_twenty_year_term
# 	}
# 	if = {
# 		limit = { scope:law_proposed = flag:3 }
# 		set_variable = law_voting_ten_year_term
# 	}
# 	if = {
# 		limit = { scope:law_proposed = flag:2 }
# 		set_variable = law_voting_four_year_term
# 	}
# 	if = {
# 		limit = { scope:law_proposed = flag:1 }
# 		set_variable = law_voting_two_year_term
# 	}
# 	if = {
# 		limit = { scope:law_proposed = flag:0 }
# 		set_variable = law_voting_one_year_term
# 	}
# 	every_in_list = {
# 		variable = republic_families_list
# 		house_head = {
# 			if = {
# 				limit = { is_ai = yes }
# 				trigger_event = republic_vote_events.1009
# 			}
# 			if = {
# 				limit = { is_ai = no }
# 				trigger_event = {
# 					id = republic_vote_events.1009
# 					days = 1
# 				}
# 			}
# 		}
# 	}
# 	holder = {
# 		trigger_event = {
# 			id = republic_vote_events.1010
# 			days = 2
# 		}
# 	}
# }

create_characters_for_republic = {
	save_scope_as = republican_head
	while = {
		count = republic_families_size_need
		create_character = {
			location = scope:republican_head.capital_province
			culture = scope:republican_head.culture
			faith = scope:republican_head.faith
			gender_female_chance = 5
			age = { 30 60 }
			save_scope_as = new_character
		}
		scope:new_character = {
			set_employer = scope:republican_head
			add_family_to_republic_families = yes
		}
	}
}

change_appeasement_positive = {
	custom_description = {
		text = effect_change_$CLASS$_appeasement_positive
		value = $AMOUNT$
		change_variable = {
			name = $CLASS$_appeasement
			add = $AMOUNT$
		}
	}
	specific_post_appeasement = { CLASS = $CLASS$ }
}

change_appeasement_negative = {
	custom_description = {
		text = effect_change_$CLASS$_appeasement_negative
		value = $AMOUNT$
		change_variable = {
			name = $CLASS$_appeasement
			add = -$AMOUNT$
		}
	}
	specific_post_appeasement = { CLASS = $CLASS$ }
}

specific_post_appeasement = {
	if = {
		limit = {
			OR = {
				var:$CLASS$_appeasement > 100
				var:$CLASS$_appeasement < 0
			}
		}
		change_variable = {
			name = $CLASS$_appeasement
			add = amount_over_or_under_$CLASS$_appeasement
		}
	}
	if = {
		limit = { var:$CLASS$_appeasement >= 0 var:$CLASS$_appeasement <= 20 }
		var:republic_owner = {
			add_character_modifier = $CLASS$_appeasement_angry
			hidden_effect = {
				remove_character_modifier = $CLASS$_appeasement_discontent
				remove_character_modifier = $CLASS$_appeasement_content
				remove_character_modifier = $CLASS$_appeasement_appeased
				remove_character_modifier = $CLASS$_appeasement_happy
			}
		}	
	}
	if = {
		limit = { var:$CLASS$_appeasement >= 21 var:$CLASS$_appeasement <= 40 }
		var:republic_owner = {
			hidden_effect = {remove_character_modifier = $CLASS$_appeasement_angry}
			add_character_modifier = $CLASS$_appeasement_discontent
			hidden_effect = {
				remove_character_modifier = $CLASS$_appeasement_content
				remove_character_modifier = $CLASS$_appeasement_appeased
				remove_character_modifier = $CLASS$_appeasement_happy
			}
		}	
	}
	if = {
		limit = { var:$CLASS$_appeasement >= 41 var:$CLASS$_appeasement <= 60 }
		var:republic_owner = {
			hidden_effect = {
				remove_character_modifier = $CLASS$_appeasement_angry
				remove_character_modifier = $CLASS$_appeasement_discontent
			}
			add_character_modifier = $CLASS$_appeasement_content
			hidden_effect = {
				remove_character_modifier = $CLASS$_appeasement_appeased
				remove_character_modifier = $CLASS$_appeasement_happy
			}
		}	
	}
	if = {
		limit = { var:$CLASS$_appeasement >= 61 var:$CLASS$_appeasement <= 80 }
		var:republic_owner = {
			hidden_effect = {
				remove_character_modifier = $CLASS$_appeasement_angry
				remove_character_modifier = $CLASS$_appeasement_discontent
				remove_character_modifier = $CLASS$_appeasement_content
			}
			add_character_modifier = $CLASS$_appeasement_appeased
			hidden_effect = {remove_character_modifier = $CLASS$_appeasement_happy}
		}	
	}
	if = {
		limit = { var:$CLASS$_appeasement >= 81 var:$CLASS$_appeasement <= 100 }
		var:republic_owner = {
			hidden_effect = {
				remove_character_modifier = $CLASS$_appeasement_angry
				remove_character_modifier = $CLASS$_appeasement_discontent
				remove_character_modifier = $CLASS$_appeasement_content
				remove_character_modifier = $CLASS$_appeasement_appeased
			}
			add_character_modifier = $CLASS$_appeasement_happy
		}	
	}
}

remove_family_from_republic = {
	house = {
		save_scope_as = house_to_remove
		var:titular_republic = {
			remove_list_variable = {
				name = republic_families_list
				target = scope:house_to_remove
			}
		}
		remove_variable = titular_republic
		remove_variable = house_senators
		remove_variable = family_prestige
	}
}

launch_coup_effect = { # Not used but shown
	stress_impact = {
		brave = medium_stress_impact_loss
		arrogant = minor_stress_impact_loss
		stubborn = minor_stress_impact_loss
		patient = miniscule_stress_impact_loss
		greedy = miniscule_stress_impact_loss
	}
	save_scope_as = couper
	change_government = feudal_government
	add_realm_law = confederate_partition_succession_law
	spawn_army = {
		uses_supply = no
		inheritable = no
		name = republic_event_troops
		levies = {
			value = 1000
		}
		men_at_arms = {
			type = pikemen_unit
			stacks = 2
		}
		men_at_arms = {
			type = bowmen
			stacks = 2
		}
		location = capital_province
	}
	random_vassal = {
		limit = { age > 15 NOT = { has_trait = incapable } }
		start_war = {
			cb = independence_war
			target = scope:couper
		}
	}
	random_character_war = {
		limit = { using_cb = independence_war }
		save_scope_as = war
	}
	every_vassal = {
		limit = {
			age > 15
			NOT = {
				has_trait = incapable
				any_character_war = {
					using_cb = independence_war
				}
			}
		}
		scope:war = { add_attacker = PREV }
	}
	var:republic_head = {
		every_in_list = {
			variable = republic_families_list
			house_head = { remove_family_from_republic = {} }
		}
	}
	end_story = var:republic_head
}

reform_into_feudal_effect = { # Not used but shown
	change_government = feudal_government
	add_realm_law = confederate_partition_succession_law
	spawn_army = {
		uses_supply = no
		inheritable = no
		name = republic_event_troops
		levies = {
			value = 1000
		}
		men_at_arms = {
			type = pikemen_unit
			stacks = 2
		}
		men_at_arms = {
			type = bowmen
			stacks = 2
		}
		location = capital_province
	}
}

effect_create_personal_army = {
	if = {
		limit = { is_landed = yes exists = capital_province }
		spawn_army = {
			uses_supply = no
			inheritable = yes
			name = republic_event_troops
			levies = {
				value = 1000
			}
			location = capital_province
		}
	}
}

effect_create_house_army = {
	spawn_army = {
		uses_supply = no
		inheritable = yes
		name = republic_event_troops
		levies = {
			value = 700
		}
		men_at_arms = {
			type = armored_footmen
			stacks = 2
		}
		location = capital_province
	}
}

change_into_republic_on_start = {
	change_government = res_republic_government
	trigger_event = republic_decision_events.1006
}

generate_counties_for_lower_house = {
	save_scope_as = titular_republic
	var:republic_owner.primary_title = {
		every_in_de_facto_hierarchy = {
			limit = {
				tier = tier_county
				# OR = {
				# 	AND = {
				# 		scope:titular_republic = { has_variable = same_culture_citizenship }
				# 		culture = scope:titular_republic.title_capital_county.culture
				# 	}
				# 	AND = {
				# 		scope:titular_republic = { has_variable = same_culture_group_citizenship }
				# 		culture.heritage = scope:titular_republic.title_capital_county.culture.heritage
				# 	}
				# 	scope:titular_republic = { has_variable = all_cultures_citizenship }
				# }
				# OR = {
				# 	AND = {
				# 		scope:titular_republic = { has_variable = same_faith_citizenship }
				# 		faith = scope:titular_republic.title_capital_county.faith
				# 	}
				# 	AND = {
				# 		scope:titular_republic = { has_variable = same_religion_group_citizenship }
				# 		faith.religion = scope:titular_republic.title_capital_county.faith.religion
				# 	}
				# 	scope:titular_republic = { has_variable = all_religions_citizenship }
				# }
				# OR = {
				# 	AND = {
				# 		scope:titular_republic = { has_variable = de_jure_citizenship }
				# 		save_temporary_scope_as = test_dejure
				# 		scope:titular_republic = { is_de_jure_liege_or_above_target = scope:test_dejure }
				# 	}
				# 	scope:titular_republic = { has_variable = de_facto_citizenship }
				# }
			}
			save_scope_as = title_for_lower_house
			scope:titular_republic = {
				add_to_variable_list = {
					name = lower_house_counties
					target = scope:title_for_lower_house
				}
			}
		}
	}
}

republic_senator_elections = {
	if = {
		limit = { var:republic_government_type = 0 }
		every_in_list = {
			variable = republic_families_list
			if = {
				limit = { senators_change > 0 }
				house_head = {
					send_interface_message = {
						left_icon = this
						title = senators_lose
						custom_description = {
							text = effect_lose_senators
							house = {
								set_variable = {
									name = senators_change
									value = senators_change
								}
							}
						}
					}
				}
			}
			if = {
				limit = { senators_change < 0 }
				house_head = {
					send_interface_message = {
						left_icon = this
						title = senators_gain
						custom_description = {
							text = effect_gain_senators
							house = {
								set_variable = {
									name = senators_change
									value = add_senators_change
								}
							}
						}
					}
				}
			}
			remove_variable = house_senators
			set_variable = {
				name = house_senators
				value = clean_family_votes
			}
		}
		while = {
			count = total_current_votes
			add_more_senators = yes
		}
	}
}

add_more_senators = {
	ordered_in_list = {
		variable = republic_families_list
		order_by = {
			value = var:house_senators
			multiply = -1
		}
		position = 0
		change_variable = {
			name = house_senators
			add = 1
		}
	}
}

gain_senator_count = {
	custom_description = {
		text = effect_gain_senators
		subject = this
		value = $GAINS$
		house = {
			change_variable = {
				name = house_senators
				add = $GAINS$
			}
		}
	}
}

lose_senator_count = {
	custom_description = {
		text = effect_lose_senators
		subject = this
		value = $LOSSES$
		house = {
			change_variable = {
				name = house_senators
				add = $LOSSES$
			}
		}
	}
}

dictatorship_proposal_quick_vote = {
	save_scope_as = proposed_dictator
	house.var:titular_republic = {
		every_in_list = {
			variable = republic_families_list
			house_head = {
				if = {
					limit = { is_ai = yes }
					random_list = {
						100 = {
							negative_dictatorship_vote_modifier = yes
							house = { set_variable = house_votes_nay }
						}
						0 = {
							dictatorship_vote_modifier = yes
							house = { set_variable = house_votes_yea }
						}
					}
				}
				if = {
					limit = { is_ai = no }
					trigger_event = republic_vote_events.1015
				}
			}
		}
	}
	trigger_event = {
		id = republic_vote_events.1016
		days = 1
	}
}

finish_dictatorship_appointment_effect = {
	if = { limit = { NOT = { exists = scope:proposed_dictator } } save_scope_as = proposed_dictator }
	if = { limit = { NOT = { exists = scope:titular_republic } } house.var:titular_republic = { save_scope_as = titular_republic } }
	if = {
		limit = {
			house.var:titular_republic.all_votes_yea >= house.var:titular_republic.all_votes_nay
		}
		house.var:titular_republic = {
			every_in_list = {
				variable = republic_families_list
				house_head = {
					if = {
						limit = { scope:proposed_dictator = this }
						trigger_event = dictatorship_events.1000
					}
					else = {
						trigger_event = dictatorship_events.1001
					}
				}
			}
		}
		if = {
			limit = { NOT = { scope:proposed_dictator = { has_title = house.var:titular_republic } } }
			var:republic_owner = {
				capital_county = {
					save_scope_as = old_capital
				}
				if = {
					limit = {
						is_ai = no
					}
					set_variable = play_on
				}
				if = {
					limit = { scope:old_holder = { is_independent_ruler = no } }
					scope:old_holder.liege = { save_scope_as = new_liege }
				}
				create_title_and_vassal_change = {
					type = granted
					save_scope_as = title_change
					add_claim_on_loss = no
				}
				capital_county = {
					change_title_holder = {
						holder = scope:proposed_dictator
						change = scope:title_change
					}
				}
				primary_title = {
					change_title_holder = {
						holder = scope:proposed_dictator
						change = scope:title_change
					}
					save_scope_as = primary_title_carrying_over
				}
				if = {
					limit = { highest_held_title_tier = tier_duchy }
					every_held_title = {
						limit = { tier = tier_duchy NOT = { scope:primary_title_carrying_over = this } }
						change_title_holder = {
							holder = scope:proposed_dictator
							change = scope:title_change
						}
					}
				}
				if = {
					limit = { highest_held_title_tier = tier_kingdom }
					every_held_title = {
						limit = { tier = tier_kingdom NOT = { scope:primary_title_carrying_over = this } }
						change_title_holder = {
							holder = scope:proposed_dictator
							change = scope:title_change
						}
					}
				}
				if = {
					limit = { highest_held_title_tier = tier_empire }
					every_held_title = {
						limit = { tier = tier_empire NOT = { scope:primary_title_carrying_over = this } }
						change_title_holder = {
							holder = scope:proposed_dictator
							change = scope:title_change
						}
					}
				}
				resolve_title_and_vassal_change = scope:title_change
				if = {
					limit = {
						exists = scope:new_liege
					}
					create_title_and_vassal_change = {
						type = swear_fealty
						save_scope_as = change
					}
					scope:proposed_dictator = {
						change_liege = {
							liege = scope:new_liege
							change = scope:change
						}
					}
					resolve_title_and_vassal_change = scope:change
				}
				if = {
					limit = {
						scope:old_holder = {
							exists = var:play_on
							has_global_variable = play_republic_leaders
						}
					}
					set_player_character = scope:proposed_dictator
				}
				remove_variable = play_on
				if = {
					limit = { is_landed = no }
					set_employer = scope:proposed_dictator
				}
				if = {
					limit = { is_landed = yes }
					create_title_and_vassal_change = {
						type = swear_fealty
						save_scope_as = change
					}
					scope:old_holder = {
						change_liege = {
							liege = scope:proposed_dictator
							change = scope:change
						}
					}
					resolve_title_and_vassal_change = scope:change
				}
			}
			scope:proposed_dictator = {
				change_government = res_republic_government
				add_realm_law = republic_succession_law
				add_realm_law = crown_authority_2
				house = {
					set_variable = {
						name = temporary_change_prestige
						value = -500
						years = 10
					}
				}
				primary_title = {
					set_capital_county = scope:old_capital
				}
			}
		}
		scope:titular_republic = {
			set_variable = current_dictatorship
		}
	}
}

add_law = { # LAW = law passed
	var:republic_head = {
		remove_variable = $LAW_TYPE$
		set_variable = {
			name = $LAW_TYPE$
			value = $LAW$
		}
	}
}

propose_law = {
	house = { save_scope_as = house_prop }
	house.var:titular_republic = {
		set_variable = {
			name = proposed_law_type
			value = $PROPOSED_LAW_TYPE$
		}
		set_variable = {
			name = proposed_law
			value = $PROPOSED_LAW$
		}
		set_variable = {
			name = law_proposer
			value = scope:house_prop
		}
		var:republic_owner = { trigger_event = { id = republic_vote_events.1003 days = { 10 30 } } }
	}
}

republic_proposed_bill = {
	save_scope_value_as = { name = proposed_law_type value = var:proposed_law_type }
	var:law_proposer = { save_scope_as = proposing_house }
	save_scope_as = titular_republic
	if = {
		limit = { var:proposed_law = 0 }
		every_in_list = {
			variable = republic_families_list
			limit = { house_head = { is_ai = yes can_vote_in_government = yes } } 
			random_list = {
				50 = { modifier = { add = house_head.0_prop } set_variable = house_votes_yea }
				50 = { set_variable = house_votes_nay }
			}
		}
		if = {
			limit = { var:republic_owner = { republic_has_bicameral_form = {} } }
			every_in_list = {
				variable = lower_house_counties
				random_list = {
					90 = { modifier = { add = 0_prop_lower_house } set_variable = county_votes_yea }
					100 = { set_variable = county_votes_nay }
				}
			}
		}
	}
	if = {
		limit = { var:proposed_law = 1 }
		every_in_list = {
			variable = republic_families_list
			limit = { house_head = { is_ai = yes can_vote_in_government = yes } } 
			random_list = {
				50 = { modifier = { add = house_head.1_prop } set_variable = house_votes_yea }
				50 = { set_variable = house_votes_nay }
			}
		}
	}
	if = {
		limit = { var:proposed_law = 2 }
		every_in_list = {
			variable = republic_families_list
			limit = { house_head = { is_ai = yes can_vote_in_government = yes } } 
			random_list = {
				50 = { modifier = { add = house_head.2_prop } set_variable = house_votes_yea }
				50 = { set_variable = house_votes_nay }
			}
		}
	}
	if = {
		limit = { var:proposed_law = 3 }
		every_in_list = {
			variable = republic_families_list
			limit = { house_head = { is_ai = yes can_vote_in_government = yes } } 
			random_list = {
				50 = { modifier = { add = house_head.3_prop } set_variable = house_votes_yea }
				50 = { set_variable = house_votes_nay }
			}
		}
		every_in_list = {
			variable = lower_house_counties
			random_list = {
				90 = { modifier = { add = 3_prop_lower_house } set_variable = county_votes_yea }
				100 = { set_variable = county_votes_nay }
			}
		}
	}
	if = {
		limit = { var:proposed_law = 4 }
		every_in_list = {
			variable = republic_families_list
			limit = { house_head = { is_ai = yes can_vote_in_government = yes } } 
			random_list = {
				50 = { modifier = { add = house_head.4_prop } set_variable = house_votes_yea }
				50 = { set_variable = house_votes_nay }
			}
		}
		every_in_list = {
			variable = lower_house_counties
			random_list = {
				90 = { modifier = { add = 4_prop_lower_house } set_variable = county_votes_yea }
				100 = { set_variable = county_votes_nay }
			}
		}
	}
	if = {
		limit = { var:proposed_law = 5 }
		every_in_list = {
			variable = republic_families_list
			limit = { house_head = { is_ai = yes can_vote_in_government = yes } } 
			random_list = {
				50 = { modifier = { add = house_head.5_prop } set_variable = house_votes_yea }
				50 = { set_variable = house_votes_nay }
			}
		}
		every_in_list = {
			variable = lower_house_counties
			random_list = {
				90 = { modifier = { add = 5_prop_lower_house } set_variable = county_votes_yea }
				100 = { set_variable = county_votes_nay }
			}
		}
	}
	if = {
		limit = { var:proposed_law = 6 }
		every_in_list = {
			variable = republic_families_list
			limit = { house_head = { is_ai = yes can_vote_in_government = yes } } 
			random_list = {
				50 = { modifier = { add = house_head.6_prop } set_variable = house_votes_yea }
				50 = { set_variable = house_votes_nay }
			}
		}
		if = {
			limit = { var:republic_owner = { republic_has_bicameral_form = {} } }
			every_in_list = {
				variable = lower_house_counties
				random_list = {
					90 = { modifier = { add = 6_prop_lower_house } set_variable = county_votes_yea }
					100 = { set_variable = county_votes_nay }
				}
			}
		}
	}
	if = {
		limit = { var:proposed_law = 7 }
		every_in_list = {
			variable = republic_families_list
			limit = { house_head = { is_ai = yes can_vote_in_government = yes } } 
			random_list = {
				50 = { modifier = { add = house_head.7_prop } set_variable = house_votes_yea }
				50 = { set_variable = house_votes_nay }
			}
		}
		if = {
			limit = { var:republic_owner = { republic_has_bicameral_form = {} } }
			every_in_list = {
				variable = lower_house_counties
				random_list = {
					90 = { modifier = { add = 7_prop_lower_house } set_variable = county_votes_yea }
					100 = { set_variable = county_votes_nay }
				}
			}
		}
	}
	if = {
		limit = { var:proposed_law = 8 }
		every_in_list = {
			variable = republic_families_list
			limit = { house_head = { is_ai = yes can_vote_in_government = yes } } 
			random_list = {
				50 = { modifier = { add = house_head.8_prop } set_variable = house_votes_yea }
				50 = { set_variable = house_votes_nay }
			}
		}
		if = {
			limit = { var:republic_owner = { republic_has_bicameral_form = {} } }
			every_in_list = {
				variable = lower_house_counties
				random_list = {
					90 = { modifier = { add = 8_prop_lower_house } set_variable = county_votes_yea }
					100 = { set_variable = county_votes_nay }
				}
			}
		}
	}
	if = {
		limit = { var:proposed_law = 9 }
		every_in_list = {
			variable = republic_families_list
			limit = { house_head = { is_ai = yes can_vote_in_government = yes } } 
			random_list = {
				50 = { modifier = { add = house_head.10_prop } set_variable = house_votes_yea }
				50 = { set_variable = house_votes_nay }
			}
		}
		if = {
			limit = { var:republic_owner = { republic_has_bicameral_form = {} } }
			every_in_list = {
				variable = lower_house_counties
				random_list = {
					90 = { modifier = { add = 9_prop_lower_house } set_variable = county_votes_yea }
					100 = { set_variable = county_votes_nay }
				}
			}
		}
	}
	if = {
		limit = { var:proposed_law = 10 }
		every_in_list = {
			variable = republic_families_list
			limit = { house_head = { is_ai = yes can_vote_in_government = yes } } 
			random_list = {
				50 = { modifier = { add = house_head.10_prop } set_variable = house_votes_yea }
				50 = { set_variable = house_votes_nay }
			}
		}
		if = {
			limit = { var:republic_owner = { republic_has_bicameral_form = {} } }
			every_in_list = {
				variable = lower_house_counties
				random_list = {
					90 = { modifier = { add = 10_prop_lower_house } set_variable = county_votes_yea }
					100 = { set_variable = county_votes_nay }
				}
			}
		}
	}
	if = {
		limit = { var:proposed_law = 11 }
		every_in_list = {
			variable = republic_families_list
			limit = { house_head = { is_ai = yes can_vote_in_government = yes } } 
			random_list = {
				50 = { modifier = { add = house_head.11_prop } set_variable = house_votes_yea }
				50 = { set_variable = house_votes_nay }
			}
		}
		if = {
			limit = { var:republic_owner = { republic_has_bicameral_form = {} } }
			every_in_list = {
				variable = lower_house_counties
				random_list = {
					90 = { modifier = { add = 11_prop_lower_house } set_variable = county_votes_yea }
					100 = { set_variable = county_votes_nay }
				}
			}
		}
	}
	every_in_list = {
		variable = republic_families_list
		limit = { house_head = { is_ai = no can_vote_in_government = yes } }
		house_head = { trigger_event = republic_vote_events.1001 }
	}
	var:republic_owner = { trigger_event = { id = republic_vote_events.1002 days = 1 } }
}

finish_legislation = {
	if = {
		limit = { law_passes = yes }
		if = {
			limit = { var:proposed_law_type = flag:war_declaration_law }
			var:republic_owner = { add_law = { LAW_TYPE = war_declaration_law LAW = var:proposed_law } }
		}
		if = {
			limit = { var:proposed_law_type = flag:council_appointment_law }
			var:republic_owner = { add_law = { LAW_TYPE = council_appointment_law LAW = var:proposed_law } }
		}
		if = {
			limit = { var:proposed_law_type = flag:imprisonment_rights_law }
			var:republic_owner = { add_law = { LAW_TYPE = imprisonment_rights_law LAW = var:proposed_law } }
		}
		if = {
			limit = { var:proposed_law_type = flag:title_powers_law }
			var:republic_owner = { add_law = { LAW_TYPE = title_powers_law LAW = var:proposed_law } }
		}
		if = {
			limit = { var:proposed_law_type = flag:term_limits_law }
			var:republic_owner = { add_law = { LAW_TYPE = term_limits_law LAW = var:proposed_law } }
		}
	}
	every_in_list = {
		variable = republic_families_list
		remove_variable = house_votes_yea
		remove_variable = house_votes_nay
	}
	remove_variable = proposed_law_type
	remove_variable = proposed_law
	remove_variable = law_proposer
}

vote_on_type = {
	var:republic_owner.house = {
		set_variable = house_votes_yea
	}
	if = {
		limit = {
			var:republic_owner = { republic_has_bicameral_form = {} }
			OR = {
				AND = { flag:$TYPE$ = flag:war OR = { var:war_declaration_law = 3 var:war_declaration_law = 5 } }
				AND = { flag:$TYPE$ = flag:prison OR = { var:imprisonment_rights_law = 3 var:imprisonment_rights_law = 5 } }
				AND = { OR = { flag:$TYPE$ = flag:grant flag:$TYPE$ = flag:revocation } OR = { var:title_powers_law = 3 var:title_powers_law = 5 } }
				AND = { flag:$TYPE$ = flag:council OR = { var:council_appointment_law = 3 var:council_appointment_law = 5 } }
			}
		}
		every_in_list = {
			variable = lower_house_counties
			random_list = {
				90 = { modifier = { add = $TYPE$_prop_lower } set_variable = county_votes_yea }
				100 = { set_variable = county_votes_nay }
			}
		}
	}
	if = {
		limit = { NOT = { var:war_declaration_law = 5 } }
		every_in_list = {
			variable = republic_families_list
			limit = { house_head = { is_ai = yes can_vote_in_government = yes } } 
			random_list = {
				50 = { modifier = { add = house_head.$TYPE$_prop } house = { set_variable = house_votes_yea } }
				50 = { house = { set_variable = house_votes_nay } }
			}
		}
	}
	var:republic_owner.house = {
		set_variable = house_votes_yea
		remove_variable = house_votes_nay
	}
	if = {
		limit = { law_passes = yes }
		add_to_variable_list = {
			name = valid_$TYPE$_targets_list
			target = scope:recipient
		}
		var:republic_owner = {
			send_interface_toast = {
				title = approved_$TYPE$
				left_icon = scope:recipient
			}
		}
	}
}